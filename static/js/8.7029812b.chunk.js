(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[8],{101:function(e,t,c){"use strict";t.a=c.p+"static/media/message.17f316c9.mp3"},122:function(e,t,c){},130:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(6),r=c(7),i=c(0),o=c(17),l=c(9),d=c.n(l),b=c(101),u=c(102),j=(c(27),c(126)),h=(c(122),c(2)),m=function(e){var t=Object(i.useState)(e.filteredData),c=Object(r.a)(t,2),n=(c[0],c[1],Object(i.useState)(!1)),s=Object(r.a)(n,2),a=(s[0],s[1],Object(i.useRef)(null)),o=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(i.useEffect)((function(){return document.body.addEventListener("keydown",o),function(){document.body.removeEventListener("keydown",o)}}),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(j.a,{nodeRef:a,in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(h.jsx)("div",{className:"modal",onClick:e.onClose,ref:a,children:Object(h.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h4",{className:"modal-title",children:e.title})}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsxs)("table",{className:"modaltable table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"#"}),Object(h.jsx)("th",{scope:"col",children:"Lot"}),Object(h.jsx)("th",{scope:"col",children:"Factory"}),Object(h.jsx)("th",{scope:"col",children:"Price"}),Object(h.jsx)("th",{scope:"col",children:"Bidder"}),Object(h.jsx)("th",{scope:"col",children:"Status"}),Object(h.jsx)("th",{scope:"col",children:"Action"})]})}),Object(h.jsx)("tbody",{children:e.filteredData.map((function(t,c){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("h4",{children:c+1})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.lot})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.factory_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.maximum_bid})}),Object(h.jsx)("td",{children:Object(h.jsx)("h4",{children:t.buyer_name})}),Object(h.jsx)("td",{children:Object(h.jsx)("span",{className:1===t.sold_status?"hname":(t.sold_status,"rname"),children:1===t.sold_status?"Sold":2===t.sold_status?"Unsold":"Pending"})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,1)},className:"btn btn-success px-3",children:Object(h.jsx)("i",{className:"fas fa-check","aria-hidden":"true"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,2)},className:"btn btn-danger px-3",children:Object(h.jsx)("i",{className:"fas fa-times","aria-hidden":"true"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.onV(t,0)},className:"btn btn-info px-3",children:Object(h.jsx)("i",{className:"fas fa-spinner","aria-hidden":"true"})})]})]},t.id)}))})]})}),Object(h.jsx)("div",{className:"modal-footer",children:Object(h.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})},f=c(106),O=c.n(f),x=c(100),p=c(44),v=c(45),N=function(e){var t=e.el,c=e.users,n=e.handleSoldstatus,s=e.formatTime,a=e.time;return Object(h.jsx)("div",{className:"col-md-3 col-sm-12 col-xs-12 list",children:Object(h.jsxs)("div",{className:"card mb-4",children:[Object(h.jsxs)("div",{className:"badge",children:["Lot- ",t.lot]}),Object(h.jsxs)("div",{className:"card-body ",children:[Object(h.jsxs)("span",{className:"text-white bg-l px-2 py-1 rounded-pill animate__animated animate__flash animate__infinite",children:["Live ",s(a),Object(h.jsx)("span",{className:"dot"})]}),Object(h.jsxs)("div",{className:"mt-3 row",children:[Object(h.jsxs)("div",{className:"col-md-7 col-sm-7 col-xs-7 border-right",children:[Object(h.jsx)("h5",{className:"card-title",children:t.factory_name}),Object(h.jsxs)("p",{className:"card-text",children:["INV:",t.invoice," LOT:",t.lot]}),Object(h.jsxs)("p",{className:"card-text",children:["PRICE:",t.price," QTY:",t.pkgs]}),Object(h.jsxs)("p",{className:"card-text",children:["GRADE:",t.grade]}),Object(h.jsx)("div",{className:"card-sp",children:0===t.maximum_bid?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h5",{className:"card-price",children:["Max.",t.maximum_bid]}),Object(h.jsxs)("span",{className:t.buyer===c.link_id?"hname":"rname",children:[t.buyer_name,"(",t.maximum_bid-t.price,")"]}),Object(h.jsx)("br",{})]})})]}),Object(h.jsx)("div",{className:"col-md-5 d-flex justify-content-center align-items-center col-sm-5 col-xs-5 b-bg",children:Object(h.jsxs)("div",{className:"cusrow",children:[Object(h.jsx)("button",{onClick:function(){return n(t,1)},disabled:t.brokers!==c.link_id,className:"btn btn-success square-circle mr-4",children:Object(h.jsx)(v.b,{className:"bid"})}),Object(h.jsx)("button",{onClick:function(){return n(t,2)},disabled:t.brokers!==c.link_id,className:"btn btn-danger square-circle",children:Object(h.jsx)(v.c,{className:"bid"})})]})})]})]})]})})},g=c(4),k=u.a.connect("http://68.183.81.28:3009");t.default=function(){var e=Object(g.n)(),t=Object(i.useState)(!1),c=Object(r.a)(t,2),n=c[0],l=c[1],u="http://68.183.81.28:3009",j=Object(o.c)((function(e){return e.auction})).auction_data,f=localStorage.getItem("users"),v=JSON.parse(f),y=Object(i.useState)(""),w=Object(r.a)(y,2),S=w[0],_=w[1],C=Object(i.useState)(""),E=Object(r.a)(C,2),I=E[0],L=E[1],T=Object(i.useState)(),R=Object(r.a)(T,2),V=(R[0],R[1]),A=Object(i.useState)([]),F=Object(r.a)(A,2),P=F[0],D=F[1],G=Object(i.useState)([]),U=Object(r.a)(G,2),B=U[0],J=U[1],M=Object(i.useState)(0),q=Object(r.a)(M,2),K=q[0],z=q[1],Q=Object(i.useState)(1),W=Object(r.a)(Q,2),X=W[0],Y=W[1],H=Object(i.useState)(0),Z=Object(r.a)(H,2),$=Z[0],ee=Z[1],te=Object(i.useState)(!1),ce=Object(r.a)(te,2),ne=(ce[0],ce[1]),se=Object(i.useState)(!0),ae=Object(r.a)(se,2),re=(ae[0],ae[1]),ie=Object(i.useState)(0),oe=Object(r.a)(ie,2),le=oe[0],de=oe[1],be=Object(i.useState)(!1),ue=Object(r.a)(be,2),je=ue[0],he=ue[1],me=Object(i.useState)(!1),fe=Object(r.a)(me,2),Oe=fe[0],xe=fe[1],pe=Object(i.useState)(!1),ve=Object(r.a)(pe,2),Ne=ve[0],ge=ve[1],ke=Object(o.b)(),ye=function(){var e=Object(a.a)(s.a.mark((function e(t,c){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,xe(!0),n=t.id,a=c,e.next=6,d.a.put("".concat(u,"/updatesold"),{id:n,status:a});case 6:return e.next=8,d.a.get("".concat(u,"/getselectbroker"));case 8:r=e.sent,k.emit("user",r.data[0].current_brokers),xe(!1),k.on("users",(function(e){var t=e.filter((function(e){return 0===e.sold_status}));D(t),J(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}(),we=function(){var e=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(u,"/getselectbroker"));case 3:t=e.sent,k.emit("user",t.data[0].current_brokers),l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(a.a)(s.a.mark((function e(){var t,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=12;break}return e.prev=1,e.next=4,d.a.get("".concat(u,"/getselectbroker"));case 4:t=e.sent,c=t.data[0].auction,re(0===c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),_e=null,Ce=function(){var t=Object(a.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"visible"===document.visibilityState?clearTimeout(_e):_e=setTimeout((function(){e("/")}),5e4);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ee=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat(u,"/startauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat(u,"/stopauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(a.a)(s.a.mark((function e(){var t,c,n,a,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(u,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],n=c.auction,a=c.current_brokers,r=c.name,i=c.id,re(0===n),e.next=8,Promise.all([_(r),L(i),V(a)]);case 8:return k.emit("user",a),o=function(e){ne(e===v.link_id)},k.on("user_toggle",o),e.abrupt("return",(function(){k.off("users",a),k.off("user_toggle",o)}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=!0,t=function(){he(!0)},c=function(){he(!1)},n=function(e){de(e)},s=Object(x.throttle)(Se,1e3);return k.on("visibility",s),k.on("start",t),k.on("stop",c),k.on("time",n),Le(),k.on("users",(function(t){if(e){var c=t.filter((function(e){return 0===e.sold_status}));D(c),J(t)}})),k.on("checkname",(function(t){e&&_(t)})),function(){e=!1,k.off("users"),k.off("checkname"),k.off("visibility",s),k.off("start",t),k.off("stop",c),k.off("time",n)}}),[k]),Object(i.useEffect)((function(){var e;return je?function t(){k.emit("tick"),e=setTimeout(t,1e3)}():clearTimeout(e),function(){return clearTimeout(e)}}),[je]),Object(i.useEffect)((function(){ke(Object(p.b)());var e=function(e){re(e),localStorage.setItem("isVisible",e)},t=function(){he(!0)},c=function(){he(!1)},n=function(e){de(e)},s=function(e){ee(e)},a=function(e){z(e)},r=function(e){Y(e)};return k.on("visibility",e),k.on("start",t),k.on("stop",c),k.on("time",n),k.on("activeUsers",s),k.on("startIndex",a),k.on("endIndex",r),k.emit("getObjects"),document.addEventListener("visibilitychange",Ce),function(){!1,document.removeEventListener("visibilitychange",Ce),k.off("visibility",e),k.off("start",t),k.off("stop",c),k.off("time",n),k.off("activeUsers",s),k.off("startIndex",a),k.off("endIndex",r),k.off("getObjects")}}),[]);var Te=Object(x.throttle)(Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.next=3,Ee();case 3:re(!1),k.emit("visibility",!1),k.once("play-sound",(function(){new Audio(b.a).play()})),k.emit("start"),ge(!1);case 8:case"end":return e.stop()}}),e)}))),1e3),Re=Object(x.throttle)(Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:re(!0),k.emit("visibility",!0),k.emit("stop");case 5:case"end":return e.stop()}}),e)}))),1e3),Ve=function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),c=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(c)},Ae=B.filter((function(e){return e.brokers===I&&0!=e.buyer})),Fe=Object(i.useState)([{id:1,name:"Uttarbangla brokers Ltd.",checked:!1},{id:2,name:"Uttaranchal brokers Ltd.",checked:!1},{id:3,name:"Mohanonda brokers Ltd.",checked:!1},{id:4,name:"Green valley tea brokers Ltd.",checked:!1},{id:5,name:"Indigo brokers Ltd.",checked:!1}]),Pe=Object(r.a)(Fe,2);Pe[0],Pe[1];return Object(h.jsxs)(h.Fragment,{children:[Oe?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"overlay",children:Object(h.jsxs)("div",{className:"spinner-container",children:[Object(h.jsx)("div",{className:"spinner"}),Object(h.jsx)("span",{children:"Verifying data..."})]})})}):"",B[0]?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{title:"Brokers Lot",onClose:function(){return l(!1)},show:n,filteredData:Ae,onV:ye}),Object(h.jsxs)("div",{className:"section-head sec-h",children:[Object(h.jsxs)("p",{className:"br-n",children:["=",S,"="]}),Object(h.jsxs)("div",{className:"row newc",children:[Object(h.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(h.jsxs)("h2",{children:["Auction Date:"," ",0===j.length?"":j[0].date," "]}),Object(h.jsxs)("p",{children:["SALE NO - #",0===j.length?"":j[0].sale_no," ",$," "]}),Object(h.jsxs)("p",{children:["Season - #",0===j.length?"":j[0].season," "]}),Object(h.jsxs)("p",{children:["CURRENT BROKER :"," ",Object(h.jsx)("span",{className:"c_brokers",children:S})," "]}),Object(h.jsx)("div",{className:" row margin-left",children:"BROKERS"===v.type?Object(h.jsx)("button",{type:"button",onClick:we,className:"col-5  buttonGroup btn btn-danger my-btn",children:"All"}):""})]}),Object(h.jsxs)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:[Object(h.jsxs)("div",{className:"bflex card-btn rightButton",children:[Object(h.jsxs)("div",{className:"button-row",children:[Object(h.jsx)("button",{disabled:Ne,type:"button",onClick:function(){Te()},className:"buttonGroup btn btn-primary my-btn",children:"START"}),Object(h.jsx)("button",{type:"button",onClick:function(){Re()},className:"buttonGroup btn btn-danger my-btn",children:"STOP"})]}),Object(h.jsxs)("div",{className:"button-row",children:[Object(h.jsx)("button",{type:"button",onClick:function(){if(K-4>=0){var e=K-4,t=X-4;z(e),Y(t),k.emit("updateIndexes",{startIndex:e,endIndex:t}),k.off("updateIndexes")}},className:"buttonGroup btn btn-success my-btn",children:"PREV"}),Object(h.jsx)("button",{type:"button",onClick:function(){if(X+4<=P.length){var e=K+4,t=X+4;z(e),Y(t),k.emit("updateIndexes",{startIndex:e,endIndex:t}),k.off("updateIndexes")}},className:"buttonGroup btn btn-success my-btn",children:"NEXT"})]})]}),Object(h.jsx)("div",{className:"col-12",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"row rightCard",children:Object(h.jsxs)("div",{className:" ",children:[Object(h.jsx)("div",{className:"col-md-6 count-t",children:Object(h.jsx)("h2",{className:"text-center mh2",children:Ve(le)})}),Object(h.jsx)("div",{className:"col-md-6 name-t",children:Object(h.jsx)("h2",{className:"mh2 text-center",children:v.short_name})})]})})})})]})]})]}),Object(h.jsxs)("h2",{className:"text-center p-h",children:["-=",v.type," PANEL=-"]}),Object(h.jsx)("hr",{className:"hr-h"}),Object(h.jsx)("div",{className:"con",children:Object(h.jsx)("div",{className:"row g-1",children:P.slice(K,X+3).map((function(e,t){return Object(h.jsx)(N,{el:e,users:v,handleSoldstatus:ye,formatTime:Ve,time:le},e.id+9)}))})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)(O.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(h.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"Verifying Data..."})]})})]})}}}]);
//# sourceMappingURL=8.7029812b.chunk.js.map